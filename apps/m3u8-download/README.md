# 🎬 M3U8 在线下载工具

强大的 M3U8/HLS 视频下载工具，支持范围下载、流式下载、AES 解密

> ⚠️ 所有视频处理均在浏览器本地完成，不会上传到任何服务器。

## ✨ 功能特性

- 📥 **M3U8 视频下载**
  - 🎯 一键解析 M3U8 播放列表
  - 📊 实时显示下载进度
  - 🎨 可视化片段状态（等待/下载中/完成/失败）
  - ⏸️ 支持暂停/继续下载
  - 🔄 自动重试失败片段
  - 💾 原格式 (.ts) 或转码 MP4 下载
  - 🔒 隐私优先，浏览器端处理

- 🎯 **范围下载**
  - 📏 自定义下载片段范围
  - 🎬 选择特定片段区间
  - ⚡ 节省时间和带宽
  - 🎪 适合预览或测试场景

- 🌊 **流式下载 (推荐)**
  - 💧 几乎不占用内存
  - 🚀 适合超大视频文件
  - 📦 边下载边写入磁盘
  - ⚡ 支持原格式 (.ts) 和 MP4
  - 🔧 需要浏览器支持 Streams API

  > **浏览器兼容性:**
  >
  > - ✅ Chrome 90+, Edge 90+, Firefox 88+
  > - ⚠️ Safari 不支持流式下载（将使用普通下载）

- 🔐 **AES 解密支持**
  - 🔑 自动识别 AES-128 加密
  - 🔓 自动获取密钥并解密
  - 🛡️ 支持标准 HLS 加密格式
  - ✨ 无需手动操作

- 🎬 **MP4 转码**
  - 🎥 TS 文件自动合并转 MP4
  - 📹 保持原视频质量
  - 🔄 支持普通和流式两种模式
  - 💻 浏览器端转码，无需服务器

  > **转码技术:**
  >
  > - 基于 mux.js 实现 TS 到 MP4 转换
  > - 支持音视频轨道合并
  > - 自动处理时间戳同步

- 🎨 **用户体验**
  - 🖱️ 点击重试单个失败片段
  - 📊 整体进度条 + 详细片段网格
  - 🏷️ 鼠标悬停显示片段详情
  - 📱 响应式设计，支持移动端
  - 🎯 清晰的状态提示和错误处理

## 🚀 快速开始

1. 打开 [M3U8 下载工具](https://m3u8dw.pages.dev/)
2. 粘贴 M3U8 链接到输入框
3. 选择下载方式：
   - **普通下载**: 适合小文件
   - **范围下载**: 自定义片段区间
   - **流式下载**: 推荐用于大文件 (>500MB)
4. 点击下载按钮，等待完成
5. 自动保存到浏览器默认下载目录

## 💡 使用技巧

### 下载方式选择

| 文件大小  | 推荐方式            | 说明             |
| --------- | ------------------- | ---------------- |
| < 100MB   | 普通下载            | 快速，简单       |
| 100-500MB | 普通下载 / 流式下载 | 根据内存情况选择 |
| > 500MB   | 流式下载            | 几乎不占内存     |

### 格式选择

- **原格式 (.ts)**: 下载速度快，文件较大，兼容性好
- **MP4**: 文件较小，兼容性更好，需要额外转码时间

### 常见问题

<details>
  <summary>❓ 为什么下载失败？</summary>

  可能的原因：
  - M3U8 链接已失效
  - 视频存在跨域限制
  - 网络连接不稳定
  - 浏览器版本过低

  解决方法：
  - 检查链接是否可访问
  - 尝试更换浏览器
  - 查看浏览器控制台错误信息
</details>

<details>
  <summary>❓ Safari 无法使用流式下载？</summary>

  Safari 不支持 Streams API 的 `WritableStream`，系统会自动降级为普通下载模式。建议使用 Chrome、Edge 或 Firefox 获得最佳体验。
</details>

<details>
  <summary>❓ 如何下载指定片段？</summary>

  1. 点击「选择范围下载」按钮
  2. 输入起始片段和结束片段编号
  3. 点击下载按钮
  4. 系统只会下载指定范围内的片段
</details>

<details>
  <summary>❓ 下载中断了怎么办？</summary>

  - 点击「暂停/继续」按钮可以恢复下载
  - 红色失败片段可以单独点击重试
  - 系统每 2 秒会自动重试失败片段
  - 可以点击「下载已完成片段」保存部分内容
</details>

## 🌐 浏览器支持

- **基础功能**: 所有现代浏览器 (Chrome 90+, Firefox 88+, Safari 14+, Edge 90+)
- **流式下载**: Chrome 90+, Edge 90+, Firefox 88+ (Safari 不支持)
- **推荐浏览器**: Chrome / Edge (获得最佳体验)

## 🔒 隐私保护

- ✅ 所有视频处理均在浏览器本地完成
- ✅ 不上传任何数据到服务器
- ✅ 不记录或存储任何下载链接
- ✅ 开源透明，可审查代码
- ✅ 无需注册或登录

## 📝 开发计划

- [ ] 支持多个 M3U8 同时下载
- [ ] 支持自定义文件名
- [ ] 支持下载历史记录
- [ ] 支持更多视频格式导出
- [ ] 添加视频预览功能
- [ ] 支持 M4S 格式
- [ ] 优化大文件内存占用

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📜 License

[MIT](./LICENSE) License &copy; 2026-PRESENT [wudi](https://github.com/WuChenDi)
